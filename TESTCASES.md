# Тест-кейсы для ручки https://qa-internship.avito.com/api/1/item/{id}
## 1 - Поиск существующего объявления
__Предусловие:__ создано объявление c66f214f-e103-441c-b9bf-474d3fd028ea, если оно удалено, то создать новое

__Шаги:__
* Выполнить GET запрос https://qa-internship.avito.com/api/1/item/c66f214f-e103-441c-b9bf-474d3fd028ea
  
__Ожидаемый результат:__ успешный статус код (200), получаем данные по объявлению

__Фактический результат:__ успешный статус код (200), получаем данные по объявлению

## 2 - Поиск объявления по некорректным данным

### 1 случай - поиск объявления по спец символу

__Предусловие:__ отсутствует

__Шаги:__
* Выполнить GET запрос https://qa-internship.avito.com/api/1/item/!
  
__Ожидаемый результат:__ 404 ошибка, объявление не найдено

__Фактический результат:__ 404 ошибка, объявление не найдено

---    
### 2 случай - поиск объявления по числу

__Предусловие:__ отсутствует

__Шаги:__
* Выполнить GET запрос https://qa-internship.avito.com/api/1/item/-1
  
__Ожидаемый результат:__ 404 ошибка, объявление не найдено

__Фактический результат:__ 404 ошибка, объявление не найдено

---
### 3 случай - поиск объявления по пробелу

__Предусловие:__ отсутствует

__Шаги:__
* Выполнить GET запрос https://qa-internship.avito.com/api/1/item/ 
  
__Ожидаемый результат:__ 404 ошибка, объявление не найдено

__Фактический результат:__ 404 ошибка, объявление не найдено

---
### 4 случай - поиск объявления по несуществующему UUID

__Предусловие:__ объявление 2e483dfd-3773-4471-9bbb-769daff07890 не существует

__Шаги:__
* Выполнить GET запрос https://qa-internship.avito.com/api/1/item/2e483dfd-3773-4471-9bbb-769daff07890
  
__Ожидаемый результат:__ 404 ошибка, объявление не найдено

__Фактический результат:__ 404 ошибка, объявление не найдено


# Тест-кейсы для ручки https://qa-internship.avito.com/api/1/{sellerId}/item

## 1 - Получение всех объявлений продавца 
__Предусловие:__ у продавца 953891 присутствуют объявления

__Шаги:__
* Выполнить GET запрос https://qa-internship.avito.com/api/1/953891/item
  
__Ожидаемый результат:__ успешный статус (200), получение объявлений

__Фактический результат:__ успешный статус (200), получение объявлений

## 2 - Получение всех объявлений у продавца без публикаций

__Предусловие:__ у продавца 953800 нет созданных объявлений

__Шаги:__
* Выполнить GET запрос https://qa-internship.avito.com/api/1/953800/item
  
__Ожидаемый результат:__ успешный статус (200), объявления отсутствуют

__Фактический результат:__ успешный статус (200), объявления отсутствуют

## 3 - Получение всех объявлений по невалидным данным
### 1 случай - передача sellerId вне диапазона допустимых значений

__Предусловие:__ отсутствует

__Шаги:__
* Выполнить GET запрос https://qa-internship.avito.com/api/1/123/item
* Выполнить GET запрос https://qa-internship.avito.com/api/1/12345678/item
  
__Ожидаемый результат:__ ошибка 404, продавцы не найдены

__Фактический результат:__ успешный статус (200), выдача объявлений

---
### 2 случай - передача отрицательного sellerId

__Предусловие:__ отсутствует

__Шаги:__
* Выполнить GET запрос https://qa-internship.avito.com/api/1/-1/item
  
__Ожидаемый результат:__ ошибка 404, продавец не найден

__Фактический результат:__ успешный статус (200), выдача объявлений

---
### 3 случай - передача спецсимвола в sellerId

__Предусловие:__ отсутствует

__Шаги:__
* Выполнить GET запрос https://qa-internship.avito.com/api/1/!/item
  
__Ожидаемый результат:__ ошибка 404, продавец не найден

__Фактический результат:__ успешный статус (200), выдача объявлений sellerID = 0

---
### 4 случай - передача пробела в sellerId

__Предусловие:__ отсутствует

__Шаги:__
* Выполнить GET запрос https://qa-internship.avito.com/api/1/ /item
  
__Ожидаемый результат:__ ошибка 404, продавец не найден

__Фактический результат:__ успешный статус (200), выдача объявлений sellerID = 0

# Тест-кейсы для ручки https://qa-internship.avito.com/api/1/item
## 1 - Создание объявления с корректными данными
__Предусловие:__ отсутствует

__Шаги:__
* Заполнить тело запроса ("Ноутбук", 50999, 953891, 0, 0, 0)
* Выполнить POST запрос https://qa-internship.avito.com/api/1/item
  
__Ожидаемый результат:__ успешное создание ноутбука с ценой 50999 у 953891 продавца с нулевой статистикой

__Фактический результат:__ успешное создание ноутбука с ценой 50999 у 953891 продавца с нулевой статистикой

## 2 - Создание объявления с невалидными данными
### 1 случай - передача числа в текстовом поле
__Предусловие:__ отсутствует

__Шаги:__
* Заполнить тело запроса (-1, 50000, 953891, 0, 0, 0)
* Выполнить POST запрос https://qa-internship.avito.com/api/1/item
  
__Ожидаемый результат:__ ошибка сервера, невозможно создать объявление

__Фактический результат:__ ошибка сервера, невозможно создать объявление

---
### 2 случай - передача текста в числовом поле
__Предусловие:__ отсутствует

__Шаги:__
* Заполнить тело запроса ("Ноутбук", "50000", 953891, 0, 0, 0)
* Выполнить POST запрос https://qa-internship.avito.com/api/1/item
  
__Ожидаемый результат:__ ошибка сервера, невозможно создать объявление

__Фактический результат:__ ошибка сервера, невозможно создать объявление

---
### 3 случай - создание объявления с ценой с копейками
__Предусловие:__ отсутствует

__Шаги:__
* Заполнить тело запроса ("Ноутбук", 50000.5, 953891, 0, 0, 0)
* Выполнить POST запрос https://qa-internship.avito.com/api/1/item
  
__Ожидаемый результат:__ ошибка сервера, невозможно создать объявление

__Фактический результат:__ ошибка сервера, невозможно создать объявление

---
### 4 случай - создание объявления без обязательных параметров
__Предусловие:__ отсутствует

__Шаги:__
* Заполнить тело запроса, убрав из него name (50000, 953891, 0, 0, 0)
* Выполнить POST запрос https://qa-internship.avito.com/api/1/item
  
__Ожидаемый результат:__ ошибка сервера, невозможно создать объявление

__Фактический результат:__ успешное создание объявления без названия

---
### 5 случай - создание объявления с отрицательной ценой
__Предусловие:__ отсутствует

__Шаги:__
* Заполнить тело запроса ("Ноутбук", -50000, 953891, 0, 0, 0)
* Выполнить POST запрос https://qa-internship.avito.com/api/1/item
  
__Ожидаемый результат:__ ошибка сервера, невозможно создать объявление

__Фактический результат:__ успешное создание объявления с отрицательной ценой

---
### 6 случай - создание объявления для отрицательного sellerId
__Предусловие:__ отсутствует

__Шаги:__
* Заполнить тело запроса ("Ноутбук", 50000, -953891, 0, 0, 0)
* Выполнить POST запрос https://qa-internship.avito.com/api/1/item
  
__Ожидаемый результат:__ ошибка сервера, невозможно создать объявление

__Фактический результат:__ успешное создание объявления для отрицательного sellerId



## Программа 
    import requests
    import pytest

    class Test_API:
    
    @pytest.mark.parametrize(
            "uuid, status",
            [
                ("c66f214f-e103-441c-b9bf-474d3fd028ea", 200), #созданное объявление
                ("!", 404), #негативно проверяем, спец символ, пробел, отрицательные и не uuid значения
                ("ca1-123-cc", 404),
                (" ", 404),
                (-1, 404),
            ]
    )
    def test_take_card(self, uuid, status):
        data = requests.get(f"https://qa-internship.avito.com/api/1/item/{uuid}")
        assert data.status_code == status


    @pytest.mark.parametrize(
            "seller_id, status",
            [
                (953800, 200), #первые 2 значения в интервале, у одного продавца 0 объявлений, у другого есть созданные
                (953891, 200),
                (123, 404), #диапазон ID от 111 111 до 999 999, проверяем значения меньше, больше, отрицательные и спец символы. 
                            #На данные запросы должен возвращаться 404/400 статус код, в методе получения объявления возвращается 404, ставлю ее
                (12345678, 404), 
                (-1, 404), 
                ("!", 404),
                (" ", 404),
            ]
    )
    def test_take_cards(self, seller_id, status):
        data = requests.get(f"https://qa-internship.avito.com/api/1/{seller_id}/item")
        assert data.status_code == status


    @pytest.mark.parametrize(
            "name, price, sellerId, contacts, likes, viewCount, status",
            [
                #не считаю, что полям статистики необходимо тестирование, так как в реальных задачах такие данные не указываются, а подсчитываются системой
                ("Ноутбук", 50999, 953891, 0, 0, 0, 200), #проверяем положительную ситуацию

                ("Ноутбук", 50000, "", 0, 0, 0, 500), #можно ли оставить поле sellerID пустым, фактически токен, сервер вернул 500, ставлю ее
                (-1, 50000, 953891, 0, 0, 0, 500), #передача числа в текстовое поле
                ("Ноутбук", "50000", 953891, 0, 0, 0, 500), #передача текса в числовое поле
                ("Ноутбук", 50000, "953891", 0, 0, 0, 500),
                ("Ноутбук", 50000.5, 953891, 0, 0, 0, 500), #цена с копейками


                (None, 50000, 953891, 0, 0, 0, 400), #можно ли оставить обязатльные поля пустыми
                ("Ноутбук", None, 953891, 0, 0, 0, 400),
                ("Ноутбук", 50000, None, 0, 0, 0, 400),
                ("Ноутбук", -100, 953891, 0, 0, 0, 400), #отрицательная цена
                ("Ноутбук", 50000, -10, 0, 0, 0, 400), #создание отрицательного ID пользователя
                ("Ноутбук", 0, 953891, 0, 0, 0, 400), #нулевая цена
                
            ]
    )
    def test_create_card(self, name, price, sellerId, contacts, likes, viewCount, status):
        body = {
            "statistics": {
                "contacts": contacts,
                "likes": likes,
                "viewCount": viewCount
        }
        }
        #можно ли отправить тело запроса без обязательных параметров: цены, названия и продавца
        if price is not None:
            body["price"] = price

        if name is not None:
            body["name"] = name

        if sellerId is not None:
            body["sellerId"] = sellerId

        
        print(body)
        data = requests.post("https://qa-internship.avito.com/api/1/item", json = body)

        assert data.status_code == status


